<!-- The form for a new onthemarket object where the user is selling stocks
/ what a user creates inorder to perform a transaction -->

<%= form_for @onthemarket, url: user_portfolio_onthemarkets_path do |f| %>
  <div class="form-group">
    <%= f.hidden_field :buying, :value => params[:buying] %>
  </div>
  <div class = "form-group">
    <%= f.label :stocks_on_market, 'Stock available to sell:' %>
    <% array_of_symbols = [] %>
    <% array_of_symbols = Stock.where(portfolio_id: current_user.id).all.map{|t| t.symbol}.uniq %>
    <%= f.select :stocks_on_market, array_of_symbols,class: 'form-control selling-form' %>
  </div>
  <div class = "form-group">
    <%= f.label :ideal_number_sold, 'Ideal transaction quantity (Stk):' %> 
    <%= y = f.number_field :ideal_number_sold, min: 1, max: 999999, class: 'selling-form' %>
  </div>
  <div class = "form-group">
    <%= f.label :price_per, 'Minimum price per stock ($/Stk):' %>
    <%= f.number_field :price_per, :step => 0.01, min: 0.01, class: 'selling-form' %>
  </div>
  <div class = "form-group">
    <%= f.label :least_possible, 'Minimum sale quantity (Stk):' %>
    <%= f.number_field :least_possible, :step => 0.01, min: 0.01, class: 'selling-form'%>
  </div>
  <div class="form-group">
    <%= f.submit "Propose your transaction", class: 'btn btn-primary' %>
  </div>
<% end %>
